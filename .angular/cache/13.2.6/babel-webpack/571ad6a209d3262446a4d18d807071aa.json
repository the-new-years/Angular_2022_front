{"ast":null,"code":"import { Validators } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/shared/assignments.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/forms\";\nimport * as i4 from \"src/app/shared/data.service\";\nimport * as i5 from \"src/app/shared/auth.service\";\nimport * as i6 from \"../../shared/navigation/navigation.component\";\nimport * as i7 from \"@angular/common\";\nimport * as i8 from \"@angular/material/stepper\";\nimport * as i9 from \"@angular/material/button\";\nimport * as i10 from \"@angular/material/form-field\";\nimport * as i11 from \"@angular/material/input\";\nconst _c0 = [\"stepper\"];\n\nfunction AssignmentDetailComponent_button_20_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 40);\n    i0.ɵɵlistener(\"click\", function AssignmentDetailComponent_button_20_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r6 = i0.ɵɵnextContext();\n      return ctx_r6.showstepper();\n    });\n    i0.ɵɵelement(1, \"i\", 17);\n    i0.ɵɵtext(2, \" Not\\u00E9 le devoir\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction AssignmentDetailComponent_ng_template_48_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \"Step 1\");\n  }\n}\n\nfunction AssignmentDetailComponent_ng_template_57_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \"Step 2\");\n  }\n}\n\nfunction AssignmentDetailComponent_div_67_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"label\");\n    i0.ɵɵtext(2, \"Entrer une note entre 0 et 20\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(3, \"br\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction AssignmentDetailComponent_ng_template_69_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \"Valider\");\n  }\n}\n\nexport let AssignmentDetailComponent = /*#__PURE__*/(() => {\n  class AssignmentDetailComponent {\n    constructor(assignmentsService, route, router, _formBuilder, dataService, authService) {\n      this.assignmentsService = assignmentsService;\n      this.route = route;\n      this.router = router;\n      this._formBuilder = _formBuilder;\n      this.dataService = dataService;\n      this.authService = authService;\n      this.isLinear = true;\n      this.roleUser = '';\n    }\n\n    changeStep(index) {\n      this.stepper.selectedIndex = index;\n    }\n\n    isProf() {\n      if (this.roleUser == 'Prof') {\n        return true;\n      }\n    }\n\n    ngOnInit() {\n      this.dataService.userInfo.subscribe(data => {\n        this.roleUser = data.roleUser;\n      });\n      this.getAssignmentById();\n      this.firstFormGroup = this._formBuilder.group({\n        commentaire: ['']\n      });\n      this.secondFormGroup = this._formBuilder.group({\n        note: ['', [Validators.required, Validators.max(20), Validators.min(0)]]\n      });\n    }\n\n    showstepper() {\n      if (document.getElementById('stepper').hidden) {\n        document.getElementById('stepper').hidden = false;\n      } else {\n        document.getElementById('stepper').hidden = true;\n      }\n    }\n\n    getAssignmentById() {\n      // les params sont des string, on va forcer la conversion\n      // en number en mettant un \"+\" devant\n      const id = +this.route.snapshot.params.id;\n      this.assignmentsService.getAssignment(id).subscribe(assignment => {\n        this.assignmentTransmis = assignment;\n      });\n    }\n\n    onAssignmentRendu() {\n      this.assignmentTransmis.rendu = true;\n      this.assignmentsService.updateAssignment(this.assignmentTransmis).subscribe(reponse => {\n        console.log(reponse.message); // et on navigue vers la page d'accueil qui affiche la liste\n\n        this.router.navigate(['/home']);\n      }); //this.assignmentTransmis = null;\n    }\n\n    onDelete() {\n      this.assignmentsService.deleteAssignment(this.assignmentTransmis).subscribe(reponse => {\n        console.log(reponse.message); // on cache l'affichage du détail\n\n        this.assignmentTransmis = null; // et on navigue vers la page d'accueil qui affiche la liste\n\n        this.router.navigate(['/home']);\n      });\n    }\n    /*\n    onClickEdit() {\n      this.router.navigate(['/assignment', this.assignmentTransmis.id, 'edit'], {\n        queryParams: {\n          nom:'Michel Buffa',\n          metier:\"Professeur\",\n          responsable:\"MIAGE\"\n        },\n        fragment:\"edition\"\n      });\n    }\n    */\n\n\n    onClickEdit(event) {\n      console.log(\"On edition\", event);\n      console.log(\"On edition\", this.assignmentTransmis.id);\n      this.router.navigate(['/assignment', this.assignmentTransmis.id, 'edit']);\n    }\n\n  }\n\n  AssignmentDetailComponent.ɵfac = function AssignmentDetailComponent_Factory(t) {\n    return new (t || AssignmentDetailComponent)(i0.ɵɵdirectiveInject(i1.AssignmentsService), i0.ɵɵdirectiveInject(i2.ActivatedRoute), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.FormBuilder), i0.ɵɵdirectiveInject(i4.DataService), i0.ɵɵdirectiveInject(i5.AuthService));\n  };\n\n  AssignmentDetailComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: AssignmentDetailComponent,\n    selectors: [[\"app-assignment-detail\"]],\n    viewQuery: function AssignmentDetailComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵviewQuery(_c0, 5);\n      }\n\n      if (rf & 2) {\n        let _t;\n\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.stepper = _t.first);\n      }\n    },\n    decls: 82,\n    vars: 13,\n    consts: [[1, \"content-page\"], [1, \"content\"], [1, \"container-fluid\"], [1, \"row\"], [1, \"col-xl-12\"], [1, \"breadcrumb-holder\"], [1, \"main-title\", \"float-left\"], [1, \"breadcrumb\", \"float-right\"], [1, \"breadcrumb-item\"], [1, \"breadcrumb-item\", \"active\"], [1, \"clearfix\"], [1, \"col-xs-12\", \"col-sm-12\", \"col-md-12\", \"col-lg-12\", \"col-xl-12\"], [1, \"card\", \"mb-3\"], [1, \"card-header\"], [1, \"pull-right\"], [\"class\", \"btn btn-success btn-sm\", 3, \"click\", 4, \"ngIf\"], [1, \"btn\", \"btn-danger\", \"btn-sm\", 3, \"click\"], [\"aria-hidden\", \"true\", 1, \"fas\", \"fa-times\"], [1, \"btn\", \"btn-primary\", \"btn-sm\", 3, \"click\"], [1, \"far\", \"fa-file-alt\"], [1, \"card-body\"], [1, \"card\", \"border-success\", \"mb-3\"], [1, \"card-body\", \"text-success\"], [1, \"card-title\"], [1, \"card-text\"], [\"id\", \"stepper\", \"hidden\", \"\", 3, \"linear\"], [\"stepper\", \"\"], [3, \"stepControl\"], [3, \"formGroup\"], [\"matStepLabel\", \"\"], [1, \"md-form\"], [\"type\", \"text\", \"formControlName\", \"commentaire\", \"mdbInput\", \"\", 1, \"md-textarea\", \"md-textarea-auto\", \"form-control\"], [\"mat-button\", \"\", \"mat-raised-button\", \"\", \"color\", \"primary\", \"matStepperNext\", \"\"], [\"matInput\", \"\", \"placeholder\", \"Note\", \"formControlName\", \"note\", \"type\", \"number\", \"min\", \"0\", \"max\", \"20\", \"required\", \"\", 1, \"input-text\"], [\"mat-button\", \"\", \"mat-raised-button\", \"\", \"color\", \"\", \"matStepperPrevious\", \"\"], [4, \"ngIf\"], [\"matStepLabel\", \"\", \"icon\", \"\"], [\"type\", \"text\", \"matInput\", \"\", \"mdbInput\", \"\", \"required\", \"\", \"disabled\", \"\", 1, \"md-textarea\", \"md-textarea-auto\", \"form-control\", 3, \"value\"], [\"matInput\", \"\", \"type\", \"number\", \"required\", \"\", \"disabled\", \"\", 1, \"input-text\", 3, \"value\"], [\"mat-button\", \"\", \"mat-raised-button\", \"\", \"color\", \"primary\", 3, \"click\"], [1, \"btn\", \"btn-success\", \"btn-sm\", 3, \"click\"]],\n    template: function AssignmentDetailComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelement(0, \"app-navigation\");\n        i0.ɵɵelementStart(1, \"div\", 0)(2, \"div\", 1)(3, \"div\", 2)(4, \"div\", 3)(5, \"div\", 4)(6, \"div\", 5)(7, \"h1\", 6);\n        i0.ɵɵtext(8, \"Assignments\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(9, \"ol\", 7)(10, \"li\", 8);\n        i0.ɵɵtext(11, \"Accueil\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(12, \"li\", 9);\n        i0.ɵɵtext(13, \"Modification de l'assignment\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelement(14, \"div\", 10);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(15, \"div\", 3)(16, \"div\", 11)(17, \"div\", 12)(18, \"div\", 13)(19, \"span\", 14);\n        i0.ɵɵtemplate(20, AssignmentDetailComponent_button_20_Template, 3, 0, \"button\", 15);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(21, \"span\", 14)(22, \"button\", 16);\n        i0.ɵɵlistener(\"click\", function AssignmentDetailComponent_Template_button_click_22_listener() {\n          return ctx.onDelete();\n        });\n        i0.ɵɵelement(23, \"i\", 17);\n        i0.ɵɵtext(24, \" Supprimer\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(25, \"span\", 14)(26, \"button\", 18);\n        i0.ɵɵlistener(\"click\", function AssignmentDetailComponent_Template_button_click_26_listener($event) {\n          return ctx.onClickEdit($event);\n        });\n        i0.ɵɵelement(27, \"i\", 17);\n        i0.ɵɵtext(28, \" Modification\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(29, \"h3\");\n        i0.ɵɵelement(30, \"i\", 19);\n        i0.ɵɵtext(31, \" Assignment\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(32, \"div\", 20)(33, \"div\", 21)(34, \"div\", 13);\n        i0.ɵɵtext(35, \"Cours\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(36, \"div\", 22)(37, \"h4\", 23);\n        i0.ɵɵtext(38);\n        i0.ɵɵelementStart(39, \"b\");\n        i0.ɵɵtext(40);\n        i0.ɵɵpipe(41, \"date\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(42, \"p\", 24);\n        i0.ɵɵtext(43, \"Some quick example text to build on the card title and make up the bulk of the card's content.\");\n        i0.ɵɵelementEnd()()()()()()();\n        i0.ɵɵelementStart(44, \"mat-horizontal-stepper\", 25, 26)(46, \"mat-step\", 27)(47, \"form\", 28);\n        i0.ɵɵtemplate(48, AssignmentDetailComponent_ng_template_48_Template, 1, 0, \"ng-template\", 29);\n        i0.ɵɵelementStart(49, \"div\", 30)(50, \"label\");\n        i0.ɵɵtext(51, \"Commentaire:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(52, \"textarea\", 31);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(53, \"button\", 32);\n        i0.ɵɵtext(54, \"Next\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(55, \"mat-step\", 27)(56, \"form\", 28);\n        i0.ɵɵtemplate(57, AssignmentDetailComponent_ng_template_57_Template, 1, 0, \"ng-template\", 29);\n        i0.ɵɵelementStart(58, \"label\");\n        i0.ɵɵtext(59, \"Notez le devoir:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(60, \"br\");\n        i0.ɵɵelementStart(61, \"mat-form-field\");\n        i0.ɵɵelement(62, \"input\", 33);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(63, \"button\", 34);\n        i0.ɵɵtext(64, \"Back\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(65, \"button\", 32);\n        i0.ɵɵtext(66, \"Next\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵtemplate(67, AssignmentDetailComponent_div_67_Template, 4, 0, \"div\", 35);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(68, \"mat-step\");\n        i0.ɵɵtemplate(69, AssignmentDetailComponent_ng_template_69_Template, 1, 0, \"ng-template\", 36);\n        i0.ɵɵelementStart(70, \"label\");\n        i0.ɵɵtext(71, \"Confirmez vos propos: \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(72, \"div\", 30)(73, \"label\");\n        i0.ɵɵtext(74, \"Commentaires:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(75, \"textarea\", 37);\n        i0.ɵɵelementStart(76, \"mat-form-field\")(77, \"label\");\n        i0.ɵɵtext(78, \"Note du devoir:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(79, \"input\", 38);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(80, \"button\", 39);\n        i0.ɵɵlistener(\"click\", function AssignmentDetailComponent_Template_button_click_80_listener() {\n          return ctx.onAssignmentRendu();\n        });\n        i0.ɵɵtext(81, \"Valider\");\n        i0.ɵɵelementEnd()()()()()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(20);\n        i0.ɵɵproperty(\"ngIf\", !ctx.assignmentTransmis.rendu && ctx.roleUser === \"Prof\");\n        i0.ɵɵadvance(18);\n        i0.ɵɵtextInterpolate1(\"\", ctx.assignmentTransmis.nom, \" \");\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(41, 11, ctx.assignmentTransmis.dateDeRendu));\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"linear\", ctx.isLinear);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"stepControl\", ctx.firstFormGroup);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"formGroup\", ctx.firstFormGroup);\n        i0.ɵɵadvance(8);\n        i0.ɵɵproperty(\"stepControl\", ctx.secondFormGroup);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"formGroup\", ctx.secondFormGroup);\n        i0.ɵɵadvance(11);\n        i0.ɵɵproperty(\"ngIf\", !ctx.secondFormGroup.valid);\n        i0.ɵɵadvance(8);\n        i0.ɵɵpropertyInterpolate(\"value\", ctx.firstFormGroup.value.commentaire);\n        i0.ɵɵadvance(4);\n        i0.ɵɵpropertyInterpolate(\"value\", ctx.secondFormGroup.value.note);\n      }\n    },\n    directives: [i6.NavigationComponent, i7.NgIf, i8.MatStepper, i8.MatStep, i3.ɵNgNoValidate, i3.NgControlStatusGroup, i3.FormGroupDirective, i8.MatStepLabel, i3.DefaultValueAccessor, i3.NgControlStatus, i3.FormControlName, i9.MatButton, i8.MatStepperNext, i10.MatFormField, i11.MatInput, i3.NumberValueAccessor, i3.MinValidator, i3.MaxValidator, i3.RequiredValidator, i8.MatStepperPrevious],\n    pipes: [i7.DatePipe],\n    styles: [\".container[_ngcontent-%COMP%]{margin:30px}#bottom[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-end}\"]\n  });\n  return AssignmentDetailComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}