{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../shared/assignments.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/material/snack-bar\";\nimport * as i4 from \"../shared/navigation/navigation.component\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"../shared/rendu.directive\";\nimport * as i7 from \"../shared/non-rendu.directive\";\n\nfunction AssignmentsComponent_tr_40_p_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 40)(1, \"b\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(3, \", rendu par \");\n    i0.ɵɵelementStart(4, \"b\");\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const a_r1 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(a_r1.matiere);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"\", a_r1.nom, \" \");\n  }\n}\n\nfunction AssignmentsComponent_tr_40_ng_template_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 41)(1, \"b\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(3, \", pas encore rendu par \");\n    i0.ɵɵelementStart(4, \"b\");\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const a_r1 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(a_r1.matiere);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"\", a_r1.nom, \" \");\n  }\n}\n\nfunction AssignmentsComponent_tr_40_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\")(2, \"div\", 29);\n    i0.ɵɵelement(3, \"img\", 30);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(4, \"td\")(5, \"h5\")(6, \"a\", 31)(7, \"b\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(9, \"p\");\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"p\")(12, \"b\");\n    i0.ɵɵtext(13);\n    i0.ɵɵpipe(14, \"date\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(15, AssignmentsComponent_tr_40_p_15_Template, 6, 2, \"p\", 32);\n    i0.ɵɵtemplate(16, AssignmentsComponent_tr_40_ng_template_16_Template, 6, 2, \"ng-template\", null, 33, i0.ɵɵtemplateRefExtractor);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(18, \"td\")(19, \"div\", 34);\n    i0.ɵɵelement(20, \"img\", 35);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(21, \"p\");\n    i0.ɵɵtext(22);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(23, \"td\")(24, \"a\", 36);\n    i0.ɵɵelement(25, \"i\", 37);\n    i0.ɵɵtext(26, \" Details\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(27, \"a\", 38);\n    i0.ɵɵlistener(\"click\", function AssignmentsComponent_tr_40_Template_a_click_27_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r8);\n      const a_r1 = restoredCtx.$implicit;\n      const ctx_r7 = i0.ɵɵnextContext();\n      return ctx_r7.onDeleteAssignment(a_r1);\n    });\n    i0.ɵɵelement(28, \"i\", 39);\n    i0.ɵɵtext(29, \" Suppression\");\n    i0.ɵɵelementEnd()()();\n  }\n\n  if (rf & 2) {\n    const a_r1 = ctx.$implicit;\n\n    const _r3 = i0.ɵɵreference(17);\n\n    i0.ɵɵadvance(3);\n    i0.ɵɵpropertyInterpolate1(\"src\", \"assets/images/matiere/\", a_r1.imageMatiere, \"\", i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(3);\n    i0.ɵɵpropertyInterpolate1(\"routerLink\", \"/assignment/\", a_r1.id, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(a_r1.matiere);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(a_r1.designations);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(14, 10, a_r1.dateDeRendu));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", a_r1.rendu)(\"ngIfElse\", _r3);\n    i0.ɵɵadvance(5);\n    i0.ɵɵpropertyInterpolate1(\"src\", \"assets/images/prof/\", a_r1.imageProf, \"\", i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(a_r1.prof);\n    i0.ɵɵadvance(2);\n    i0.ɵɵpropertyInterpolate1(\"routerLink\", \"/assignment/\", a_r1.id, \"\");\n  }\n}\n\nexport let AssignmentsComponent = /*#__PURE__*/(() => {\n  class AssignmentsComponent {\n    // on injecte le service de gestion des assignments\n    constructor(assignmentsService, route, _snackBar, router) {\n      this.assignmentsService = assignmentsService;\n      this.route = route;\n      this._snackBar = _snackBar;\n      this.router = router;\n      this.page = 1;\n      this.limit = 10;\n    }\n\n    ngOnInit() {\n      //console.log('AVANT AFFICHAGE');\n      // on regarde s'il y a page= et limit = dans l'URL\n      this.route.queryParams.subscribe(queryParams => {\n        console.log(\"Dans le subscribe des queryParams\");\n        this.page = +queryParams.page || 1;\n        this.limit = +queryParams.limit || 10;\n        this.getAssignments();\n      });\n      console.log(\"getAssignments() du service appelé\");\n    }\n\n    getAssignments() {\n      this.assignmentsService.getAssignmentsPagine(this.page, this.limit).subscribe(data => {\n        this.assignments = data.docs;\n        this.page = data.page;\n        this.limit = data.limit;\n        this.totalDocs = data.totalDocs;\n        this.totalPages = data.totalPages;\n        this.hasPrevPage = data.hasPrevPage;\n        this.prevPage = data.prevPage;\n        this.hasNextPage = data.hasNextPage;\n        this.nextPage = data.nextPage;\n        console.log(\"données reçues\");\n      });\n    }\n\n    onDeleteAssignment(assignment) {\n      this.assignmentsService.deleteAssignment(assignment).subscribe(reponse => {\n        console.log(reponse.message);\n\n        this._snackBar.open(\"Suppression effectuée\", \"Info\", {\n          duration: 2000\n        });\n\n        this.getAssignments();\n      });\n    }\n\n    premierePage() {\n      this.router.navigate(['/home'], {\n        queryParams: {\n          page: 1,\n          limit: this.limit\n        }\n      });\n    }\n\n    pageSuivante() {\n      /*\n      this.page = this.nextPage;\n      this.getAssignments();*/\n      this.router.navigate(['/home'], {\n        queryParams: {\n          page: this.nextPage,\n          limit: this.limit\n        }\n      });\n    }\n\n    pagePrecedente() {\n      this.router.navigate(['/home'], {\n        queryParams: {\n          page: this.prevPage,\n          limit: this.limit\n        }\n      });\n    }\n\n    dernierePage() {\n      this.router.navigate(['/home'], {\n        queryParams: {\n          page: this.totalPages,\n          limit: this.limit\n        }\n      });\n    }\n\n  }\n\n  AssignmentsComponent.ɵfac = function AssignmentsComponent_Factory(t) {\n    return new (t || AssignmentsComponent)(i0.ɵɵdirectiveInject(i1.AssignmentsService), i0.ɵɵdirectiveInject(i2.ActivatedRoute), i0.ɵɵdirectiveInject(i3.MatSnackBar), i0.ɵɵdirectiveInject(i2.Router));\n  };\n\n  AssignmentsComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: AssignmentsComponent,\n    selectors: [[\"app-assignments\"]],\n    decls: 51,\n    vars: 3,\n    consts: [[1, \"content-page\"], [1, \"content\"], [1, \"container-fluid\"], [1, \"row\"], [1, \"col-xl-12\"], [1, \"breadcrumb-holder\"], [1, \"main-title\", \"float-left\"], [1, \"breadcrumb\", \"float-right\"], [1, \"breadcrumb-item\"], [1, \"breadcrumb-item\", \"active\"], [1, \"clearfix\"], [1, \"col-xs-12\", \"col-sm-12\", \"col-md-12\", \"col-lg-12\", \"col-xl-12\"], [1, \"card\", \"mb-3\"], [1, \"card-header\"], [1, \"pull-right\"], [\"routerLink\", \"/add\", 1, \"btn\", \"btn-primary\", \"btn-sm\"], [\"aria-hidden\", \"true\", 1, \"fas\", \"fa-plus\"], [1, \"far\", \"fa-file-alt\"], [1, \"card-body\"], [1, \"table-responsive\"], [1, \"table\", \"table-condensed\", \"table-hover\", \"table-bordered\", \"table-responsive-md\"], [2, \"width\", \"50px\"], [2, \"min-width\", \"120px\"], [2, \"min-width\", \"110px\"], [4, \"ngFor\", \"ngForOf\"], [\"role\", \"toolbar\", \"aria-label\", \"Toolbar with button groups\", 1, \"btn-toolbar\", \"mb-3\"], [\"role\", \"group\", \"aria-label\", \"First group\", 1, \"btn-group\", \"mr-2\"], [\"type\", \"button\", 1, \"btn\", \"btn-secondary\", 3, \"click\"], [\"type\", \"button\", 1, \"btn\", \"btn-secondary\", 3, \"disabled\", \"click\"], [1, \"blog_list\"], [\"alt\", \"image\", 1, \"img-fluid\", \"d-none\", \"d-lg-block\", 3, \"src\"], [3, \"routerLink\"], [\"appRendu\", \"\", 4, \"ngIf\", \"ngIfElse\"], [\"nonsoumis\", \"\"], [1, \"mail_list\"], [\"alt\", \"image \", 1, \"img-fluid\", \"d-none\", \"d-lg-block\", 3, \"src\"], [1, \"btn\", \"btn-primary\", \"btn-sm\", \"btn-block\", 3, \"routerLink\"], [1, \"fas\", \"fa-info-circle\"], [1, \"btn\", \"btn-danger\", \"btn-sm\", \"btn-block\", \"mt-2\", 3, \"click\"], [1, \"fas\", \"fa-trash\"], [\"appRendu\", \"\"], [\"appNonRendu\", \"\"]],\n    template: function AssignmentsComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelement(0, \"app-navigation\");\n        i0.ɵɵelementStart(1, \"div\", 0)(2, \"div\", 1)(3, \"div\", 2)(4, \"div\", 3)(5, \"div\", 4)(6, \"div\", 5)(7, \"h1\", 6);\n        i0.ɵɵtext(8, \"Assignments\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(9, \"ol\", 7)(10, \"li\", 8);\n        i0.ɵɵtext(11, \"Accueil\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(12, \"li\", 9);\n        i0.ɵɵtext(13, \"Liste des assignments\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelement(14, \"div\", 10);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(15, \"div\", 3)(16, \"div\", 11)(17, \"div\", 12)(18, \"div\", 13)(19, \"span\", 14)(20, \"a\", 15);\n        i0.ɵɵelement(21, \"i\", 16);\n        i0.ɵɵtext(22, \" Ajouter un assignments\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(23, \"h3\");\n        i0.ɵɵelement(24, \"i\", 17);\n        i0.ɵɵtext(25, \" Liste des assignments\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(26, \"div\", 18)(27, \"div\", 19)(28, \"table\", 20)(29, \"thead\")(30, \"tr\")(31, \"th\", 21);\n        i0.ɵɵtext(32, \"Mati\\u00E8re\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(33, \"th\", 22);\n        i0.ɵɵtext(34, \"Details\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(35, \"th\", 23);\n        i0.ɵɵtext(36, \"Professeur\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(37, \"th\", 23);\n        i0.ɵɵtext(38, \"Actions\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(39, \"tbody\");\n        i0.ɵɵtemplate(40, AssignmentsComponent_tr_40_Template, 30, 12, \"tr\", 24);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(41, \"div\", 25)(42, \"div\", 26)(43, \"button\", 27);\n        i0.ɵɵlistener(\"click\", function AssignmentsComponent_Template_button_click_43_listener() {\n          return ctx.premierePage();\n        });\n        i0.ɵɵtext(44, \"Premi\\u00E8re\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(45, \"button\", 28);\n        i0.ɵɵlistener(\"click\", function AssignmentsComponent_Template_button_click_45_listener() {\n          return ctx.pagePrecedente();\n        });\n        i0.ɵɵtext(46, \"Prev\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(47, \"button\", 28);\n        i0.ɵɵlistener(\"click\", function AssignmentsComponent_Template_button_click_47_listener() {\n          return ctx.pageSuivante();\n        });\n        i0.ɵɵtext(48, \"Suiv\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(49, \"button\", 27);\n        i0.ɵɵlistener(\"click\", function AssignmentsComponent_Template_button_click_49_listener() {\n          return ctx.dernierePage();\n        });\n        i0.ɵɵtext(50, \"Derni\\u00E8re\");\n        i0.ɵɵelementEnd()()()()()()()()()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(40);\n        i0.ɵɵproperty(\"ngForOf\", ctx.assignments);\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"disabled\", !ctx.hasPrevPage);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"disabled\", !ctx.hasNextPage);\n      }\n    },\n    directives: [i4.NavigationComponent, i2.RouterLinkWithHref, i5.NgForOf, i5.NgIf, i6.RenduDirective, i7.NonRenduDirective],\n    pipes: [i5.DatePipe],\n    styles: [\".container[_ngcontent-%COMP%]{display:flex;flex-direction:column}.ajouterBtn[_ngcontent-%COMP%]{align-self:flex-end}mat-form-field[_ngcontent-%COMP%]{margin-right:12px}\"]\n  });\n  return AssignmentsComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}